# Chessil notify WebSocket proxy (upstream)
# Include the upstream in http {} and the location in your HTTPS server block.

upstream chessil_notify {
  server 127.0.0.1:8090 max_fails=2 fail_timeout=5s;
  server 127.0.0.1:8091 max_fails=2 fail_timeout=5s;
  keepalive 64;
}

location /notify {
  proxy_pass http://chessil_notify;
  proxy_http_version 1.1;
  proxy_set_header Upgrade $http_upgrade;
  proxy_set_header Connection "upgrade";
  include proxy_params;
}
